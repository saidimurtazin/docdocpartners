# DocDocPartner - TODO

## Бизнес-логика

### Реферальная система
- [ ] Убрать 2% комиссию с рефералов (всё ещё в routers.ts строка 379)
- [ ] Реализовать начисление 5000 бонусных баллов за успешный реферал (поле в БД есть, логика начисления — нет)
- [ ] Обновить логику бота под новую бонусную систему
- [x] Минимум 10 рефералов для вывода — реализовано в payout-calculator.ts

### База знаний
- [ ] Добавить контент из PDF в базу знаний
- [ ] Обновить benefits section по референсу

---

## Админка

### Аутентификация
- [ ] Доделать Admin OAuth callback (сейчас используется Email+OTP, OAuth callback не полностью реализован)
- [ ] Добавить кнопку logout на странице логина (переключение между admin/agent сессиями)

---

## Реализовано (было в TODO, уже в коде)
- [x] Callback-хендлеры базы знаний бота — все 6 kb_ хендлеров работают
- [x] Эмодзи в сообщениях об ошибках бота
- [x] HTML форматирование (bold/italic) в боте
- [x] Индикаторы прогресса при регистрации
- [x] Колонка "реквизиты" в таблице агентов
- [x] Колонка "ID агента" в таблице рефералов
- [x] Telegram Login Widget удалён (используется Email+OTP)
- [x] Переключение admin/agent на странице логина (кнопка назад)
